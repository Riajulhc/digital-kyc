{"ast":null,"code":"var _jsxFileName = \"E:\\\\vscode\\\\digital-kyc\\\\frontend\\\\src\\\\pages\\\\kyc-step5.jsx\",\n  _s = $RefreshSig$();\n// src/pages/kyc-step5.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { RiDownloadCloudLine, RiCheckLine, RiArrowRightLine } from \"react-icons/ri\";\nimport HDFCLogo from \"../assets/hdfc.png\";\n\n/* Helpers */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction escapeHtml(str) {\n  if (!str) return \"\";\n  return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\n}\nfunction maskAccountNo(acc) {\n  if (!acc) return \"Not assigned\";\n  const s = String(acc);\n  return `XXXX-XXXX-${s.slice(-4)}`;\n}\nfunction maskDocNumber(s) {\n  if (!s) return \"—\";\n  const st = String(s);\n  if (st.length <= 4) return \"****\";\n  return `${\"*\".repeat(Math.max(0, st.length - 4))}${st.slice(-4)}`;\n}\nfunction formatDateTime(isoOrMs) {\n  const d = isoOrMs ? new Date(isoOrMs) : new Date();\n  return d.toLocaleString();\n}\nexport default function KYCStep5() {\n  _s();\n  const navigate = useNavigate();\n  const [personal, setPersonal] = useState(null);\n  const [docData, setDocData] = useState(null);\n  const [photo, setPhoto] = useState(null);\n  const [completeResp, setCompleteResp] = useState(null);\n  useEffect(() => {\n    try {\n      setPersonal(JSON.parse(localStorage.getItem(\"kycPersonal\") || \"null\"));\n      setDocData(JSON.parse(localStorage.getItem(\"kycDocument\") || \"null\"));\n      setPhoto(localStorage.getItem(\"kycPhoto\") || null);\n      setCompleteResp(JSON.parse(localStorage.getItem(\"kycCompleteResponse\") || \"null\"));\n    } catch (e) {\n      console.warn(\"Failed to read KYC data:\", e);\n    }\n  }, []);\n  const buildPrintableHtml = ({\n    applicant,\n    kycId,\n    accountNo,\n    status,\n    submittedAt,\n    docType,\n    docNumber,\n    logoUrl,\n    photoDataUrl\n  }) => {\n    const photoHtml = photoDataUrl ? `<div style=\"margin-top:12px;\"><img src=\"${photoDataUrl}\" alt=\"passport\" style=\"width:96px;height:120px;object-fit:cover;border-radius:6px;border:1px solid #e6e6e6\" /></div>` : \"\";\n    return `<!doctype html>\n<html>\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>KYC Confirmation - ${escapeHtml(applicant)}</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    body{font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif;color:#12202a;margin:0;padding:24px;background:#f6f9fb}\n    .box{max-width:760px;margin:0 auto;background:#fff;border-radius:10px;padding:28px;border:1px solid #e8eef6}\n    .header{display:flex;align-items:center;gap:16px}\n    .logo{width:56px;height:56px;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 6px rgba(0,0,0,0.06)}\n    .hero{margin-top:18px;padding:18px;background:linear-gradient(90deg,#eaf5ff,#eef8ff);border-radius:8px}\n    .hero h1{color:#0b4aa2;margin:0;font-size:22px}\n    .hero p{margin:6px 0 0;color:#44566b}\n    .grid{display:flex;gap:18px;margin-top:20px;flex-wrap:wrap}\n    .card{flex:1 1 300px;background:#fff;padding:14px;border-radius:8px;border:1px solid #f0f4f8}\n    table{width:100%;border-collapse:collapse;margin-top:8px}\n    td{padding:8px 6px;border-bottom:1px dashed #eef2f7}\n    td.label{width:36%;font-weight:600;color:#0b3b63}\n    .muted{color:#6b7a89;font-size:13px}\n    .footer{margin-top:18px;color:#6b7a89;font-size:13px}\n    @media print { body{background:white} .box{border:none;box-shadow:none} }\n  </style>\n</head>\n<body>\n  <div class=\"box\">\n    <div class=\"header\">\n      <div class=\"logo\"><img src=\"${logoUrl}\" alt=\"logo\" style=\"height:100%;width:auto;display:block\" /></div>\n      <div>\n        <div style=\"font-size:14px;color:#6b7a89\">Digital KYC</div>\n        <div style=\"font-size:18px;font-weight:800;color:#0b2540\">KYC Confirmation</div>\n      </div>\n    </div>\n\n    <div class=\"hero\">\n      <h1>Congratulations, ${escapeHtml(applicant)}!</h1>\n      <p>Your KYC submission is received and is under verification. Keep this confirmation for your records.</p>\n    </div>\n\n    <div class=\"grid\">\n      <div class=\"card\">\n        <table>\n          <tr><td class=\"label\">Applicant</td><td>${escapeHtml(applicant)}</td></tr>\n          <tr><td class=\"label\">KYC ID</td><td>${escapeHtml(String(kycId))}</td></tr>\n          <tr><td class=\"label\">Account No</td><td>${escapeHtml(accountNo ? maskAccountNo(accountNo) : \"Not assigned\")}</td></tr>\n          <tr><td class=\"label\">Status</td><td>${escapeHtml(status)}</td></tr>\n          <tr><td class=\"label\">Submitted at</td><td>${escapeHtml(formatDateTime(submittedAt))}</td></tr>\n          <tr><td class=\"label\">Document</td><td>${escapeHtml(docType)} / ${escapeHtml(maskDocNumber(String(docNumber)))}</td></tr>\n        </table>\n      </div>\n\n      <div class=\"card\">\n        <div style=\"font-weight:700;color:#0b2540\">Important</div>\n        <div class=\"muted\" style=\"margin-top:8px\">\n          Please keep this confirmation for your records. The full document number was submitted securely and will not be shown on this page for privacy.\n        </div>\n\n        ${photoHtml}\n      </div>\n    </div>\n\n    <div class=\"footer\">Generated by Digital KYC System.</div>\n  </div>\n</body>\n</html>`;\n  };\n  const handleDownload = () => {\n    var _completeResp$kycId, _completeResp$account, _completeResp$status, _completeResp$submitt, _docData$docType, _docData$docNumber, _globalThis$window;\n    const applicant = (personal === null || personal === void 0 ? void 0 : personal.fullName) || \"Customer\";\n    const kycId = (_completeResp$kycId = completeResp === null || completeResp === void 0 ? void 0 : completeResp.kycId) !== null && _completeResp$kycId !== void 0 ? _completeResp$kycId : \"N/A\";\n    const accountNo = (_completeResp$account = completeResp === null || completeResp === void 0 ? void 0 : completeResp.accountNo) !== null && _completeResp$account !== void 0 ? _completeResp$account : null;\n    const status = (_completeResp$status = completeResp === null || completeResp === void 0 ? void 0 : completeResp.status) !== null && _completeResp$status !== void 0 ? _completeResp$status : \"Submitted\";\n    const submittedAt = (_completeResp$submitt = completeResp === null || completeResp === void 0 ? void 0 : completeResp.submittedAt) !== null && _completeResp$submitt !== void 0 ? _completeResp$submitt : new Date().toISOString();\n    const docType = (_docData$docType = docData === null || docData === void 0 ? void 0 : docData.docType) !== null && _docData$docType !== void 0 ? _docData$docType : \"—\";\n    const docNumber = (_docData$docNumber = docData === null || docData === void 0 ? void 0 : docData.docNumber) !== null && _docData$docNumber !== void 0 ? _docData$docNumber : \"—\";\n    const logoUrl = HDFCLogo; // webpack-provided URL\n    const photoDataUrl = photo || \"\";\n    const html = buildPrintableHtml({\n      applicant,\n      kycId,\n      accountNo,\n      status,\n      submittedAt,\n      docType,\n      docNumber,\n      logoUrl,\n      photoDataUrl\n    });\n\n    // try to open printable window first\n    const w = (_globalThis$window = globalThis.window) !== null && _globalThis$window !== void 0 && _globalThis$window.open ? globalThis.window.open(\"\", \"_blank\", \"noopener,noreferrer\") : null;\n    if (w) {\n      // If window opened, write and print\n      w.document.open();\n      w.document.write(html);\n      w.document.close();\n      setTimeout(() => {\n        try {\n          w.focus();\n          w.print();\n        } catch (e) {\n          // fall back to download if print failed\n          triggerDownloadBlob(html, `KYC-confirmation-${applicant}.html`);\n        }\n      }, 300);\n      return;\n    }\n\n    // popup blocked - fallback to automatic download of an HTML file\n    triggerDownloadBlob(html, `KYC-confirmation-${applicant}.html`);\n    alert(\"Popup blocked — the confirmation HTML was downloaded. Open the downloaded file and print/save-as-PDF from your browser.\");\n  };\n  const triggerDownloadBlob = (content, filename) => {\n    // use the global document reference explicitly to avoid any local shadowing\n    const gdoc = globalThis.document || (typeof document !== \"undefined\" ? document : null);\n    const gwindow = globalThis.window || (typeof window !== \"undefined\" ? window : null);\n    if (!gdoc || !gwindow) {\n      // As a last resort, navigate to a data URL (may replace current page)\n      const dataUrl = \"data:text/html;charset=utf-8,\" + encodeURIComponent(content);\n      // try to open in new tab, otherwise assign location\n      try {\n        if (gwindow && gwindow.open) {\n          gwindow.open(dataUrl, \"_blank\");\n          return;\n        }\n      } catch (e) {\n        // ignore and fallback to assign\n      }\n      if (gwindow) {\n        gwindow.location.assign(dataUrl);\n        return;\n      }\n      throw new Error(\"No DOM available to download confirmation\");\n    }\n    const blob = new Blob([content], {\n      type: \"text/html\"\n    });\n    const url = URL.createObjectURL(blob);\n\n    // create an <a> using the global document\n    const a = gdoc.createElement(\"a\");\n    a.href = url;\n    a.download = filename;\n    // append to DOM and click\n    gdoc.body.appendChild(a);\n    a.click();\n    a.remove();\n    setTimeout(() => URL.revokeObjectURL(url), 1000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-white p-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rounded-full bg-green-50 p-4 inline-flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(RiCheckLine, {\n            className: \"text-green-600\",\n            size: 36\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-extrabold mb-2\",\n        children: \"KYC Submitted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: [\"Thanks \", (personal === null || personal === void 0 ? void 0 : personal.fullName) || \"Customer\", \" \\u2014 your KYC is submitted.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-4 justify-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownload,\n          className: \"inline-flex items-center gap-2 px-5 py-3 bg-blue-700 text-white rounded-lg shadow hover:opacity-95\",\n          children: [/*#__PURE__*/_jsxDEV(RiDownloadCloudLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), \" Download Confirmation\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(\"/dashboard\"),\n          className: \"inline-flex items-center gap-2 px-5 py-3 bg-green-600 text-white rounded-lg shadow hover:opacity-95\",\n          children: [\"Go to Dashboard \", /*#__PURE__*/_jsxDEV(RiArrowRightLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-400\",\n        children: [\"Profile \", personal ? \"available\" : \"not available\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n}\n_s(KYCStep5, \"E9CgpiObm0CYeYX1EM13NgfL8Qw=\", false, function () {\n  return [useNavigate];\n});\n_c = KYCStep5;\nvar _c;\n$RefreshReg$(_c, \"KYCStep5\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","RiDownloadCloudLine","RiCheckLine","RiArrowRightLine","HDFCLogo","jsxDEV","_jsxDEV","escapeHtml","str","String","replace","maskAccountNo","acc","s","slice","maskDocNumber","st","length","repeat","Math","max","formatDateTime","isoOrMs","d","Date","toLocaleString","KYCStep5","_s","navigate","personal","setPersonal","docData","setDocData","photo","setPhoto","completeResp","setCompleteResp","JSON","parse","localStorage","getItem","e","console","warn","buildPrintableHtml","applicant","kycId","accountNo","status","submittedAt","docType","docNumber","logoUrl","photoDataUrl","photoHtml","handleDownload","_completeResp$kycId","_completeResp$account","_completeResp$status","_completeResp$submitt","_docData$docType","_docData$docNumber","_globalThis$window","fullName","toISOString","html","w","globalThis","window","open","document","write","close","setTimeout","focus","print","triggerDownloadBlob","alert","content","filename","gdoc","gwindow","dataUrl","encodeURIComponent","location","assign","Error","blob","Blob","type","url","URL","createObjectURL","a","createElement","href","download","body","appendChild","click","remove","revokeObjectURL","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["E:/vscode/digital-kyc/frontend/src/pages/kyc-step5.jsx"],"sourcesContent":["// src/pages/kyc-step5.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { RiDownloadCloudLine, RiCheckLine, RiArrowRightLine } from \"react-icons/ri\";\r\nimport HDFCLogo from \"../assets/hdfc.png\";\r\n\r\n/* Helpers */\r\nfunction escapeHtml(str) {\r\n  if (!str) return \"\";\r\n  return String(str)\r\n    .replace(/&/g, \"&amp;\")\r\n    .replace(/</g, \"&lt;\")\r\n    .replace(/>/g, \"&gt;\")\r\n    .replace(/\"/g, \"&quot;\")\r\n    .replace(/'/g, \"&#039;\");\r\n}\r\nfunction maskAccountNo(acc) {\r\n  if (!acc) return \"Not assigned\";\r\n  const s = String(acc);\r\n  return `XXXX-XXXX-${s.slice(-4)}`;\r\n}\r\nfunction maskDocNumber(s) {\r\n  if (!s) return \"—\";\r\n  const st = String(s);\r\n  if (st.length <= 4) return \"****\";\r\n  return `${\"*\".repeat(Math.max(0, st.length - 4))}${st.slice(-4)}`;\r\n}\r\nfunction formatDateTime(isoOrMs) {\r\n  const d = isoOrMs ? new Date(isoOrMs) : new Date();\r\n  return d.toLocaleString();\r\n}\r\n\r\nexport default function KYCStep5() {\r\n  const navigate = useNavigate();\r\n  const [personal, setPersonal] = useState(null);\r\n  const [docData, setDocData] = useState(null);\r\n  const [photo, setPhoto] = useState(null);\r\n  const [completeResp, setCompleteResp] = useState(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setPersonal(JSON.parse(localStorage.getItem(\"kycPersonal\") || \"null\"));\r\n      setDocData(JSON.parse(localStorage.getItem(\"kycDocument\") || \"null\"));\r\n      setPhoto(localStorage.getItem(\"kycPhoto\") || null);\r\n      setCompleteResp(JSON.parse(localStorage.getItem(\"kycCompleteResponse\") || \"null\"));\r\n    } catch (e) {\r\n      console.warn(\"Failed to read KYC data:\", e);\r\n    }\r\n  }, []);\r\n\r\n  const buildPrintableHtml = ({ applicant, kycId, accountNo, status, submittedAt, docType, docNumber, logoUrl, photoDataUrl }) => {\r\n    const photoHtml = photoDataUrl\r\n      ? `<div style=\"margin-top:12px;\"><img src=\"${photoDataUrl}\" alt=\"passport\" style=\"width:96px;height:120px;object-fit:cover;border-radius:6px;border:1px solid #e6e6e6\" /></div>`\r\n      : \"\";\r\n\r\n    return `<!doctype html>\r\n<html>\r\n<head>\r\n  <meta charset=\"utf-8\"/>\r\n  <title>KYC Confirmation - ${escapeHtml(applicant)}</title>\r\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\r\n  <style>\r\n    body{font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif;color:#12202a;margin:0;padding:24px;background:#f6f9fb}\r\n    .box{max-width:760px;margin:0 auto;background:#fff;border-radius:10px;padding:28px;border:1px solid #e8eef6}\r\n    .header{display:flex;align-items:center;gap:16px}\r\n    .logo{width:56px;height:56px;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 6px rgba(0,0,0,0.06)}\r\n    .hero{margin-top:18px;padding:18px;background:linear-gradient(90deg,#eaf5ff,#eef8ff);border-radius:8px}\r\n    .hero h1{color:#0b4aa2;margin:0;font-size:22px}\r\n    .hero p{margin:6px 0 0;color:#44566b}\r\n    .grid{display:flex;gap:18px;margin-top:20px;flex-wrap:wrap}\r\n    .card{flex:1 1 300px;background:#fff;padding:14px;border-radius:8px;border:1px solid #f0f4f8}\r\n    table{width:100%;border-collapse:collapse;margin-top:8px}\r\n    td{padding:8px 6px;border-bottom:1px dashed #eef2f7}\r\n    td.label{width:36%;font-weight:600;color:#0b3b63}\r\n    .muted{color:#6b7a89;font-size:13px}\r\n    .footer{margin-top:18px;color:#6b7a89;font-size:13px}\r\n    @media print { body{background:white} .box{border:none;box-shadow:none} }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"box\">\r\n    <div class=\"header\">\r\n      <div class=\"logo\"><img src=\"${logoUrl}\" alt=\"logo\" style=\"height:100%;width:auto;display:block\" /></div>\r\n      <div>\r\n        <div style=\"font-size:14px;color:#6b7a89\">Digital KYC</div>\r\n        <div style=\"font-size:18px;font-weight:800;color:#0b2540\">KYC Confirmation</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"hero\">\r\n      <h1>Congratulations, ${escapeHtml(applicant)}!</h1>\r\n      <p>Your KYC submission is received and is under verification. Keep this confirmation for your records.</p>\r\n    </div>\r\n\r\n    <div class=\"grid\">\r\n      <div class=\"card\">\r\n        <table>\r\n          <tr><td class=\"label\">Applicant</td><td>${escapeHtml(applicant)}</td></tr>\r\n          <tr><td class=\"label\">KYC ID</td><td>${escapeHtml(String(kycId))}</td></tr>\r\n          <tr><td class=\"label\">Account No</td><td>${escapeHtml(accountNo ? maskAccountNo(accountNo) : \"Not assigned\")}</td></tr>\r\n          <tr><td class=\"label\">Status</td><td>${escapeHtml(status)}</td></tr>\r\n          <tr><td class=\"label\">Submitted at</td><td>${escapeHtml(formatDateTime(submittedAt))}</td></tr>\r\n          <tr><td class=\"label\">Document</td><td>${escapeHtml(docType)} / ${escapeHtml(maskDocNumber(String(docNumber)))}</td></tr>\r\n        </table>\r\n      </div>\r\n\r\n      <div class=\"card\">\r\n        <div style=\"font-weight:700;color:#0b2540\">Important</div>\r\n        <div class=\"muted\" style=\"margin-top:8px\">\r\n          Please keep this confirmation for your records. The full document number was submitted securely and will not be shown on this page for privacy.\r\n        </div>\r\n\r\n        ${photoHtml}\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"footer\">Generated by Digital KYC System.</div>\r\n  </div>\r\n</body>\r\n</html>`;\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    const applicant = personal?.fullName || \"Customer\";\r\n    const kycId = completeResp?.kycId ?? \"N/A\";\r\n    const accountNo = completeResp?.accountNo ?? null;\r\n    const status = completeResp?.status ?? \"Submitted\";\r\n    const submittedAt = completeResp?.submittedAt ?? new Date().toISOString();\r\n    const docType = docData?.docType ?? \"—\";\r\n    const docNumber = docData?.docNumber ?? \"—\";\r\n    const logoUrl = HDFCLogo; // webpack-provided URL\r\n    const photoDataUrl = photo || \"\";\r\n\r\n    const html = buildPrintableHtml({\r\n      applicant,\r\n      kycId,\r\n      accountNo,\r\n      status,\r\n      submittedAt,\r\n      docType,\r\n      docNumber,\r\n      logoUrl,\r\n      photoDataUrl,\r\n    });\r\n\r\n    // try to open printable window first\r\n    const w = globalThis.window?.open ? globalThis.window.open(\"\", \"_blank\", \"noopener,noreferrer\") : null;\r\n    if (w) {\r\n      // If window opened, write and print\r\n      w.document.open();\r\n      w.document.write(html);\r\n      w.document.close();\r\n      setTimeout(() => {\r\n        try {\r\n          w.focus();\r\n          w.print();\r\n        } catch (e) {\r\n          // fall back to download if print failed\r\n          triggerDownloadBlob(html, `KYC-confirmation-${applicant}.html`);\r\n        }\r\n      }, 300);\r\n      return;\r\n    }\r\n\r\n    // popup blocked - fallback to automatic download of an HTML file\r\n    triggerDownloadBlob(html, `KYC-confirmation-${applicant}.html`);\r\n    alert(\"Popup blocked — the confirmation HTML was downloaded. Open the downloaded file and print/save-as-PDF from your browser.\");\r\n  };\r\n\r\n  const triggerDownloadBlob = (content, filename) => {\r\n    // use the global document reference explicitly to avoid any local shadowing\r\n    const gdoc = globalThis.document || (typeof document !== \"undefined\" ? document : null);\r\n    const gwindow = globalThis.window || (typeof window !== \"undefined\" ? window : null);\r\n    if (!gdoc || !gwindow) {\r\n      // As a last resort, navigate to a data URL (may replace current page)\r\n      const dataUrl = \"data:text/html;charset=utf-8,\" + encodeURIComponent(content);\r\n      // try to open in new tab, otherwise assign location\r\n      try {\r\n        if (gwindow && gwindow.open) {\r\n          gwindow.open(dataUrl, \"_blank\");\r\n          return;\r\n        }\r\n      } catch (e) {\r\n        // ignore and fallback to assign\r\n      }\r\n      if (gwindow) {\r\n        gwindow.location.assign(dataUrl);\r\n        return;\r\n      }\r\n      throw new Error(\"No DOM available to download confirmation\");\r\n    }\r\n\r\n    const blob = new Blob([content], { type: \"text/html\" });\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    // create an <a> using the global document\r\n    const a = gdoc.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = filename;\r\n    // append to DOM and click\r\n    gdoc.body.appendChild(a);\r\n    a.click();\r\n    a.remove();\r\n    setTimeout(() => URL.revokeObjectURL(url), 1000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-white p-8\">\r\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 text-center\">\r\n        <div className=\"flex items-center justify-center mb-4\">\r\n          <div className=\"rounded-full bg-green-50 p-4 inline-flex items-center justify-center\">\r\n            <RiCheckLine className=\"text-green-600\" size={36} />\r\n          </div>\r\n        </div>\r\n\r\n        <h2 className=\"text-2xl font-extrabold mb-2\">KYC Submitted</h2>\r\n        <p className=\"text-gray-600 mb-6\">Thanks {personal?.fullName || \"Customer\"} — your KYC is submitted.</p>\r\n\r\n        <div className=\"flex gap-4 justify-center mb-4\">\r\n          <button\r\n            onClick={handleDownload}\r\n            className=\"inline-flex items-center gap-2 px-5 py-3 bg-blue-700 text-white rounded-lg shadow hover:opacity-95\"\r\n          >\r\n            <RiDownloadCloudLine /> Download Confirmation\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => navigate(\"/dashboard\")}\r\n            className=\"inline-flex items-center gap-2 px-5 py-3 bg-green-600 text-white rounded-lg shadow hover:opacity-95\"\r\n          >\r\n            Go to Dashboard <RiArrowRightLine />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"text-sm text-gray-400\">Profile {personal ? \"available\" : \"not available\"}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}