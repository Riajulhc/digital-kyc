{"ast":null,"code":"var _jsxFileName = \"E:\\\\vscode\\\\digital-kyc\\\\frontend\\\\src\\\\pages\\\\kyc-step3.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { RiUploadCloudLine, RiArrowRightLine, RiArrowLeftLine } from \"react-icons/ri\";\nimport { motion } from \"framer-motion\";\nimport API from \"../services/api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STORAGE_KEY_DOC = \"dk_kyc_step3_docType\";\nconst ACCEPTED_TYPES = [\"image/jpeg\", \"image/png\", \"application/pdf\"];\nconst MAX_SIZE_BYTES = 5 * 1024 * 1024; // 5 MB\n\nfunction formatBytes(bytes) {\n  if (!bytes) return \"0 B\";\n  if (bytes < 1024) return bytes + \" B\";\n  if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + \" KB\";\n  return (bytes / (1024 * 1024)).toFixed(2) + \" MB\";\n}\nexport default function KYCStep3() {\n  _s();\n  const navigate = useNavigate();\n  const fileInputRef = useRef(null);\n  const [docType, setDocType] = useState(() => {\n    try {\n      return localStorage.getItem(STORAGE_KEY_DOC) || \"Aadhaar\";\n    } catch {\n      return \"Aadhaar\";\n    }\n  });\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [uploading, setUploading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [attemptsLeft, setAttemptsLeft] = useState(null);\n  useEffect(() => {\n    try {\n      localStorage.setItem(STORAGE_KEY_DOC, docType);\n    } catch {}\n  }, [docType]);\n  const onChooseFile = f => {\n    setError(\"\");\n    if (!f) return setFile(null);\n    if (!ACCEPTED_TYPES.includes(f.type)) {\n      return setError(\"Unsupported file type. Use JPG, PNG or PDF.\");\n    }\n    if (f.size > MAX_SIZE_BYTES) {\n      return setError(`File too large. Max ${formatBytes(MAX_SIZE_BYTES)} allowed.`);\n    }\n    setFile(f);\n  };\n  const handleFileChange = e => {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    onChooseFile(f);\n  };\n  const handleDrop = e => {\n    var _e$dataTransfer$files;\n    e.preventDefault();\n    e.stopPropagation();\n    const f = (_e$dataTransfer$files = e.dataTransfer.files) === null || _e$dataTransfer$files === void 0 ? void 0 : _e$dataTransfer$files[0];\n    onChooseFile(f);\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const handleBack = () => navigate(\"/kyc-step2\");\n  const handleUpload = async e => {\n    if (e) e.preventDefault();\n    setError(\"\");\n    if (!file) {\n      setError(\"Please select a file to upload.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"document\", file); // IMPORTANT: backend expects 'document'\n    formData.append(\"type\", docType);\n    try {\n      var _res$data$attemptsLef, _res$data;\n      setUploading(true);\n      setProgress(0);\n\n      // let axios set Content-Type (with boundary) automatically — DO NOT set multipart Content-Type manually\n      const token = localStorage.getItem(\"token\");\n      const headers = token ? {\n        Authorization: `Bearer ${token}`\n      } : {};\n      const res = await API.post(\"/kyc/upload\", formData, {\n        headers,\n        onUploadProgress: progressEvent => {\n          if (progressEvent.total) {\n            const percent = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n            setProgress(percent);\n          }\n        },\n        timeout: 120000 // 2 minutes in case upload is slow\n      });\n      const attempts = (_res$data$attemptsLef = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.attemptsLeft) !== null && _res$data$attemptsLef !== void 0 ? _res$data$attemptsLef : null;\n      setAttemptsLeft(attempts);\n\n      // Success feedback\n      alert(`Upload successful! ${attempts !== null ? `Attempts left: ${attempts}` : \"\"}`);\n      navigate(\"/kyc-step4\");\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data, _err$response3, _err$response3$data;\n      console.error(\"Upload error:\", err);\n\n      // Prefer server message, then axios message, otherwise generic\n      const serverMsg = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error);\n      const clientMsg = err === null || err === void 0 ? void 0 : err.message;\n      const msg = serverMsg || clientMsg || \"Upload failed. Please try again.\";\n\n      // If server returned validation (e.g., max attempts), display that\n      setError(msg);\n\n      // If server returned attemptsLeft, show it\n      const attemptsFromServer = err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.attemptsLeft;\n      if (typeof attemptsFromServer === \"number\") setAttemptsLeft(attemptsFromServer);\n    } finally {\n      setUploading(false);\n      setProgress(0);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-white p-6\",\n    children: /*#__PURE__*/_jsxDEV(motion.form, {\n      onSubmit: handleUpload,\n      initial: {\n        opacity: 0,\n        y: 12\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      transition: {\n        duration: 0.45\n      },\n      className: \"w-full max-w-lg bg-white p-8 rounded-2xl shadow-2xl border border-gray-100\",\n      \"aria-labelledby\": \"kyc-step3-title\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-slate-500\",\n            children: [\"Step \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 20\n            }, this), \" of \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 64\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            id: \"kyc-step3-title\",\n            className: \"text-2xl font-extrabold text-slate-800\",\n            children: \"Upload your document\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-sm text-slate-500\",\n            children: [\"Upload a clear photo or PDF of the selected identity document. Max \", formatBytes(MAX_SIZE_BYTES), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-40\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-slate-100 h-2 rounded-full overflow-hidden\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-2 rounded-full bg-blue-600\",\n              style: {\n                width: `${progress || 60}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-slate-400 mt-2 text-right\",\n            children: [\"Progress: \", progress || 60, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"docType\",\n        className: \"block text-sm font-medium text-slate-700 mb-2\",\n        children: \"Document type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"docType\",\n        value: docType,\n        onChange: e => setDocType(e.target.value),\n        className: \"w-full border border-slate-200 rounded-lg px-4 py-3 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"Aadhaar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"PAN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"Passport\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          children: \"Voter ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        role: \"button\",\n        tabIndex: 0,\n        onDrop: handleDrop,\n        onDragOver: handleDragOver,\n        onKeyDown: e => {\n          var _fileInputRef$current;\n          if (e.key === \"Enter\") (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n        },\n        className: \"mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center w-full h-36 border-2 border-dashed rounded-xl cursor-pointer hover:border-blue-500 transition bg-white\",\n          onClick: () => {\n            var _fileInputRef$current2;\n            return (_fileInputRef$current2 = fileInputRef.current) === null || _fileInputRef$current2 === void 0 ? void 0 : _fileInputRef$current2.click();\n          },\n          \"aria-describedby\": \"file-help\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileInputRef,\n            type: \"file\",\n            accept: \".jpg,.jpeg,.png,.pdf\",\n            className: \"hidden\",\n            onChange: handleFileChange,\n            \"aria-label\": \"Upload document\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-slate-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(RiUploadCloudLine, {\n                className: \"text-3xl text-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm font-medium\",\n                children: file ? \"File selected\" : \"Click or drag file here to upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-xs\",\n              children: file ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium text-slate-700\",\n                  children: file.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-slate-400\",\n                  children: formatBytes(file.size)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-slate-400\",\n                children: [\"Accepted: JPG, PNG, PDF \\xB7 Max \", formatBytes(MAX_SIZE_BYTES)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-red-600 mb-3\",\n        role: \"alert\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 19\n      }, this), uploading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-slate-100 h-2 rounded-full overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-2 rounded-full bg-blue-600 transition-all\",\n            style: {\n              width: `${progress}%`\n            },\n            \"aria-valuenow\": progress,\n            role: \"progressbar\",\n            \"aria-label\": \"Upload progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-slate-400 mt-2 text-right\",\n          children: [progress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleBack,\n          className: \"flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-200 text-sm bg-white hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-200\",\n          children: [/*#__PURE__*/_jsxDEV(RiArrowLeftLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), \" Back\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: uploading,\n          className: \"ml-auto inline-flex items-center gap-2 px-5 py-3 rounded-lg bg-blue-700 text-white font-medium shadow hover:opacity-95 focus:outline-none focus:ring-2 focus:ring-blue-300\",\n          \"aria-disabled\": uploading,\n          children: [uploading ? `Uploading ${progress}%` : \"Upload & Next\", \" \", /*#__PURE__*/_jsxDEV(RiArrowRightLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 70\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"file-help\",\n        className: \"mt-4 text-xs text-slate-400\",\n        children: \"Tip: For Aadhaar, use a clear photo showing all four corners. For PAN, a scanned PDF or clear photo works best.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}\n_s(KYCStep3, \"Ue+VpxauVHQgqjwl5qQ75h2ZelE=\", false, function () {\n  return [useNavigate];\n});\n_c = KYCStep3;\nvar _c;\n$RefreshReg$(_c, \"KYCStep3\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","RiUploadCloudLine","RiArrowRightLine","RiArrowLeftLine","motion","API","jsxDEV","_jsxDEV","Fragment","_Fragment","STORAGE_KEY_DOC","ACCEPTED_TYPES","MAX_SIZE_BYTES","formatBytes","bytes","toFixed","KYCStep3","_s","navigate","fileInputRef","docType","setDocType","localStorage","getItem","file","setFile","error","setError","uploading","setUploading","progress","setProgress","attemptsLeft","setAttemptsLeft","setItem","onChooseFile","f","includes","type","size","handleFileChange","e","_e$target$files","target","files","handleDrop","_e$dataTransfer$files","preventDefault","stopPropagation","dataTransfer","handleDragOver","handleBack","handleUpload","formData","FormData","append","_res$data$attemptsLef","_res$data","token","headers","Authorization","res","post","onUploadProgress","progressEvent","total","percent","Math","round","loaded","timeout","attempts","data","alert","err","_err$response","_err$response$data","_err$response2","_err$response2$data","_err$response3","_err$response3$data","console","serverMsg","response","message","clientMsg","msg","attemptsFromServer","className","children","form","onSubmit","initial","opacity","y","animate","transition","duration","fileName","_jsxFileName","lineNumber","columnNumber","id","style","width","htmlFor","value","onChange","role","tabIndex","onDrop","onDragOver","onKeyDown","_fileInputRef$current","key","current","click","onClick","_fileInputRef$current2","ref","accept","name","disabled","_c","$RefreshReg$"],"sources":["E:/vscode/digital-kyc/frontend/src/pages/kyc-step3.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { RiUploadCloudLine, RiArrowRightLine, RiArrowLeftLine } from \"react-icons/ri\";\r\nimport { motion } from \"framer-motion\";\r\nimport API from \"../services/api\";\r\n\r\nconst STORAGE_KEY_DOC = \"dk_kyc_step3_docType\";\r\nconst ACCEPTED_TYPES = [\"image/jpeg\", \"image/png\", \"application/pdf\"];\r\nconst MAX_SIZE_BYTES = 5 * 1024 * 1024; // 5 MB\r\n\r\nfunction formatBytes(bytes) {\r\n  if (!bytes) return \"0 B\";\r\n  if (bytes < 1024) return bytes + \" B\";\r\n  if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + \" KB\";\r\n  return (bytes / (1024 * 1024)).toFixed(2) + \" MB\";\r\n}\r\n\r\nexport default function KYCStep3() {\r\n  const navigate = useNavigate();\r\n  const fileInputRef = useRef(null);\r\n\r\n  const [docType, setDocType] = useState(() => {\r\n    try {\r\n      return localStorage.getItem(STORAGE_KEY_DOC) || \"Aadhaar\";\r\n    } catch {\r\n      return \"Aadhaar\";\r\n    }\r\n  });\r\n\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [uploading, setUploading] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [attemptsLeft, setAttemptsLeft] = useState(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY_DOC, docType);\r\n    } catch {}\r\n  }, [docType]);\r\n\r\n  const onChooseFile = (f) => {\r\n    setError(\"\");\r\n    if (!f) return setFile(null);\r\n\r\n    if (!ACCEPTED_TYPES.includes(f.type)) {\r\n      return setError(\"Unsupported file type. Use JPG, PNG or PDF.\");\r\n    }\r\n    if (f.size > MAX_SIZE_BYTES) {\r\n      return setError(`File too large. Max ${formatBytes(MAX_SIZE_BYTES)} allowed.`);\r\n    }\r\n\r\n    setFile(f);\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const f = e.target.files?.[0];\r\n    onChooseFile(f);\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const f = e.dataTransfer.files?.[0];\r\n    onChooseFile(f);\r\n  };\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const handleBack = () => navigate(\"/kyc-step2\");\r\n\r\n  const handleUpload = async (e) => {\r\n    if (e) e.preventDefault();\r\n    setError(\"\");\r\n\r\n    if (!file) {\r\n      setError(\"Please select a file to upload.\");\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"document\", file); // IMPORTANT: backend expects 'document'\r\n    formData.append(\"type\", docType);\r\n\r\n    try {\r\n      setUploading(true);\r\n      setProgress(0);\r\n\r\n      // let axios set Content-Type (with boundary) automatically — DO NOT set multipart Content-Type manually\r\n      const token = localStorage.getItem(\"token\");\r\n      const headers = token ? { Authorization: `Bearer ${token}` } : {};\r\n\r\n      const res = await API.post(\"/kyc/upload\", formData, {\r\n        headers,\r\n        onUploadProgress: (progressEvent) => {\r\n          if (progressEvent.total) {\r\n            const percent = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n            setProgress(percent);\r\n          }\r\n        },\r\n        timeout: 120000, // 2 minutes in case upload is slow\r\n      });\r\n\r\n      const attempts = res?.data?.attemptsLeft ?? null;\r\n      setAttemptsLeft(attempts);\r\n\r\n      // Success feedback\r\n      alert(`Upload successful! ${attempts !== null ? `Attempts left: ${attempts}` : \"\"}`);\r\n      navigate(\"/kyc-step4\");\r\n    } catch (err) {\r\n      console.error(\"Upload error:\", err);\r\n\r\n      // Prefer server message, then axios message, otherwise generic\r\n      const serverMsg = err?.response?.data?.message || err?.response?.data?.error;\r\n      const clientMsg = err?.message;\r\n      const msg = serverMsg || clientMsg || \"Upload failed. Please try again.\";\r\n\r\n      // If server returned validation (e.g., max attempts), display that\r\n      setError(msg);\r\n\r\n      // If server returned attemptsLeft, show it\r\n      const attemptsFromServer = err?.response?.data?.attemptsLeft;\r\n      if (typeof attemptsFromServer === \"number\") setAttemptsLeft(attemptsFromServer);\r\n    } finally {\r\n      setUploading(false);\r\n      setProgress(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-white p-6\">\r\n      <motion.form\r\n        onSubmit={handleUpload}\r\n        initial={{ opacity: 0, y: 12 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.45 }}\r\n        className=\"w-full max-w-lg bg-white p-8 rounded-2xl shadow-2xl border border-gray-100\"\r\n        aria-labelledby=\"kyc-step3-title\"\r\n      >\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <div className=\"text-sm text-slate-500\">\r\n              Step <span className=\"font-semibold\">3</span> of <span className=\"font-semibold\">5</span>\r\n            </div>\r\n            <h2 id=\"kyc-step3-title\" className=\"text-2xl font-extrabold text-slate-800\">\r\n              Upload your document\r\n            </h2>\r\n            <p className=\"mt-1 text-sm text-slate-500\">\r\n              Upload a clear photo or PDF of the selected identity document. Max {formatBytes(MAX_SIZE_BYTES)}.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"w-40\">\r\n            <div className=\"w-full bg-slate-100 h-2 rounded-full overflow-hidden\">\r\n              <div className=\"h-2 rounded-full bg-blue-600\" style={{ width: `${progress || 60}%` }} />\r\n            </div>\r\n            <div className=\"text-xs text-slate-400 mt-2 text-right\">Progress: {progress || 60}%</div>\r\n          </div>\r\n        </div>\r\n\r\n        <label htmlFor=\"docType\" className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n          Document type\r\n        </label>\r\n        <select\r\n          id=\"docType\"\r\n          value={docType}\r\n          onChange={(e) => setDocType(e.target.value)}\r\n          className=\"w-full border border-slate-200 rounded-lg px-4 py-3 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-200\"\r\n        >\r\n          <option>Aadhaar</option>\r\n          <option>PAN</option>\r\n          <option>Passport</option>\r\n          <option>Voter ID</option>\r\n        </select>\r\n\r\n        <div\r\n          role=\"button\"\r\n          tabIndex={0}\r\n          onDrop={handleDrop}\r\n          onDragOver={handleDragOver}\r\n          onKeyDown={(e) => {\r\n            if (e.key === \"Enter\") fileInputRef.current?.click();\r\n          }}\r\n          className=\"mb-4\"\r\n        >\r\n          <div\r\n            className=\"flex items-center justify-center w-full h-36 border-2 border-dashed rounded-xl cursor-pointer hover:border-blue-500 transition bg-white\"\r\n            onClick={() => fileInputRef.current?.click()}\r\n            aria-describedby=\"file-help\"\r\n          >\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\".jpg,.jpeg,.png,.pdf\"\r\n              className=\"hidden\"\r\n              onChange={handleFileChange}\r\n              aria-label=\"Upload document\"\r\n            />\r\n\r\n            <div className=\"text-center text-slate-500\">\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <RiUploadCloudLine className=\"text-3xl text-blue-500\" />\r\n                <div className=\"text-sm font-medium\">{file ? \"File selected\" : \"Click or drag file here to upload\"}</div>\r\n              </div>\r\n\r\n              <div className=\"mt-2 text-xs\">\r\n                {file ? (\r\n                  <>\r\n                    <div className=\"font-medium text-slate-700\">{file.name}</div>\r\n                    <div className=\"text-slate-400\">{formatBytes(file.size)}</div>\r\n                  </>\r\n                ) : (\r\n                  <div className=\"text-slate-400\">Accepted: JPG, PNG, PDF · Max {formatBytes(MAX_SIZE_BYTES)}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {error && <div className=\"text-sm text-red-600 mb-3\" role=\"alert\">{error}</div>}\r\n\r\n        {uploading && (\r\n          <div className=\"mb-3\">\r\n            <div className=\"w-full bg-slate-100 h-2 rounded-full overflow-hidden\">\r\n              <div\r\n                className=\"h-2 rounded-full bg-blue-600 transition-all\"\r\n                style={{ width: `${progress}%` }}\r\n                aria-valuenow={progress}\r\n                role=\"progressbar\"\r\n                aria-label=\"Upload progress\"\r\n              />\r\n            </div>\r\n            <div className=\"text-xs text-slate-400 mt-2 text-right\">{progress}%</div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleBack}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-200 text-sm bg-white hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-200\"\r\n          >\r\n            <RiArrowLeftLine /> Back\r\n          </button>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={uploading}\r\n            className=\"ml-auto inline-flex items-center gap-2 px-5 py-3 rounded-lg bg-blue-700 text-white font-medium shadow hover:opacity-95 focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n            aria-disabled={uploading}\r\n          >\r\n            {uploading ? `Uploading ${progress}%` : \"Upload & Next\"} <RiArrowRightLine />\r\n          </button>\r\n        </div>\r\n\r\n        <p id=\"file-help\" className=\"mt-4 text-xs text-slate-400\">\r\n          Tip: For Aadhaar, use a clear photo showing all four corners. For PAN, a scanned PDF or clear photo works best.\r\n        </p>\r\n      </motion.form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}