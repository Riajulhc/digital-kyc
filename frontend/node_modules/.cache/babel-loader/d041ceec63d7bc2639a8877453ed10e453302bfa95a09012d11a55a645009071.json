{"ast":null,"code":"var _jsxFileName = \"E:\\\\vscode\\\\digital-kyc\\\\frontend\\\\src\\\\pages\\\\kyc-step4.jsx\",\n  _s = $RefreshSig$();\n// src/pages/kyc-step4.jsx\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport API from \"../services/api\";\nimport { motion } from \"framer-motion\";\nimport { RiArrowLeftLine, RiArrowRightLine } from \"react-icons/ri\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function KYCStep4() {\n  _s();\n  const navigate = useNavigate();\n  const [matchScore, setMatchScore] = useState(null);\n  const [attemptsLeft, setAttemptsLeft] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [progress] = useState(60); // step 4 of 5\n\n  const handleMatch = async () => {\n    setError(\"\");\n    setLoading(true);\n    try {\n      var _res$data$match, _res$data$attemptsLef, _res$data$match2;\n      // backend will compare previously uploaded selfie vs ID files\n      const res = await API.post(\"/kyc/photo-match\");\n      setMatchScore((_res$data$match = res.data.match) !== null && _res$data$match !== void 0 ? _res$data$match : null);\n      setAttemptsLeft((_res$data$attemptsLef = res.data.attemptsLeft) !== null && _res$data$attemptsLef !== void 0 ? _res$data$attemptsLef : null);\n      if (((_res$data$match2 = res.data.match) !== null && _res$data$match2 !== void 0 ? _res$data$match2 : 0) < 60) {\n        setError(`Face match low (${res.data.match}%). Please retry following guidance (good lighting, frontal face).`);\n      } else {\n        // success -> move to review step\n        navigate(\"/kyc-step5\");\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message || \"Photo match failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center p-6 bg-blue-50\",\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        y: 8\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      className: \"w-full max-w-2xl bg-white p-8 rounded-2xl shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-start mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-slate-500\",\n            children: \"Step 4 of 5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-slate-800\",\n            children: \"Live photo verification\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-slate-500 mt-1\",\n            children: \"We will compare your selfie with the document photo. Ensure frontal face & good lighting.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-slate-400\",\n          children: [\"Progress: \", progress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border rounded p-6 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: \"Photo Match Result\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-slate-500 mb-2\",\n          children: [\"Match score: \", matchScore !== null ? `${matchScore}%` : \"Not checked\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-slate-400\",\n          children: \"A minimum of 60% is required.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), attemptsLeft !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 text-sm text-yellow-700\",\n        children: [\"Attempts left: \", attemptsLeft]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 35\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 text-sm text-red-600\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => navigate(\"/kyc-step3\"),\n          className: \"px-4 py-2 border rounded\",\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleMatch,\n          disabled: loading,\n          className: \"ml-auto px-6 py-3 bg-blue-700 text-white rounded\",\n          children: [loading ? \"Checking...\" : \"Run Face Match\", \" \", /*#__PURE__*/_jsxDEV(RiArrowRightLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 58\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(KYCStep4, \"zdH6e3iZrNo+V/Vzk4rFGkF9mnE=\", false, function () {\n  return [useNavigate];\n});\n_c = KYCStep4;\nvar _c;\n$RefreshReg$(_c, \"KYCStep4\");","map":{"version":3,"names":["useState","useNavigate","API","motion","RiArrowLeftLine","RiArrowRightLine","jsxDEV","_jsxDEV","KYCStep4","_s","navigate","matchScore","setMatchScore","attemptsLeft","setAttemptsLeft","error","setError","loading","setLoading","progress","handleMatch","_res$data$match","_res$data$attemptsLef","_res$data$match2","res","post","data","match","err","_err$response","_err$response$data","response","message","className","children","div","initial","opacity","y","animate","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","disabled","_c","$RefreshReg$"],"sources":["E:/vscode/digital-kyc/frontend/src/pages/kyc-step4.jsx"],"sourcesContent":["// src/pages/kyc-step4.jsx\r\nimport { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport API from \"../services/api\";\r\nimport { motion } from \"framer-motion\";\r\nimport { RiArrowLeftLine, RiArrowRightLine } from \"react-icons/ri\";\r\n\r\nexport default function KYCStep4() {\r\n  const navigate = useNavigate();\r\n  const [matchScore, setMatchScore] = useState(null);\r\n  const [attemptsLeft, setAttemptsLeft] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [progress] = useState(60); // step 4 of 5\r\n\r\n  const handleMatch = async () => {\r\n    setError(\"\");\r\n    setLoading(true);\r\n    try {\r\n      // backend will compare previously uploaded selfie vs ID files\r\n      const res = await API.post(\"/kyc/photo-match\");\r\n      setMatchScore(res.data.match ?? null);\r\n      setAttemptsLeft(res.data.attemptsLeft ?? null);\r\n\r\n      if ((res.data.match ?? 0) < 60) {\r\n        setError(`Face match low (${res.data.match}%). Please retry following guidance (good lighting, frontal face).`);\r\n      } else {\r\n        // success -> move to review step\r\n        navigate(\"/kyc-step5\");\r\n      }\r\n    } catch (err) {\r\n      setError(err?.response?.data?.message || err.message || \"Photo match failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center p-6 bg-blue-50\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 8 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"w-full max-w-2xl bg-white p-8 rounded-2xl shadow\"\r\n      >\r\n        <div className=\"flex justify-between items-start mb-6\">\r\n          <div>\r\n            <div className=\"text-sm text-slate-500\">Step 4 of 5</div>\r\n            <h2 className=\"text-2xl font-bold text-slate-800\">Live photo verification</h2>\r\n            <p className=\"text-sm text-slate-500 mt-1\">We will compare your selfie with the document photo. Ensure frontal face & good lighting.</p>\r\n          </div>\r\n          <div className=\"text-sm text-slate-400\">Progress: {progress}%</div>\r\n        </div>\r\n\r\n        <div className=\"border rounded p-6 mb-4\">\r\n          <h3 className=\"font-semibold mb-2\">Photo Match Result</h3>\r\n          <div className=\"text-sm text-slate-500 mb-2\">Match score: {matchScore !== null ? `${matchScore}%` : \"Not checked\"}</div>\r\n          <div className=\"text-sm text-slate-400\">A minimum of 60% is required.</div>\r\n        </div>\r\n\r\n        {attemptsLeft !== null && <div className=\"mb-3 text-sm text-yellow-700\">Attempts left: {attemptsLeft}</div>}\r\n        {error && <div className=\"mb-3 text-sm text-red-600\">{error}</div>}\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button type=\"button\" onClick={() => navigate(\"/kyc-step3\")} className=\"px-4 py-2 border rounded\">Back</button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleMatch}\r\n            disabled={loading}\r\n            className=\"ml-auto px-6 py-3 bg-blue-700 text-white rounded\"\r\n          >\r\n            {loading ? \"Checking...\" : \"Run Face Match\"} <RiArrowRightLine />\r\n          </button>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}